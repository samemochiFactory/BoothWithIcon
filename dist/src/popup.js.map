{"version":3,"file":"popup.js","sources":["../../src/popup.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', async () => {\r\n    // --- popup.htmlでのみ実行される処理 ---\r\n    if (document.body.id === 'popup-page') {\r\n        const namingRuleCheckboxes = document.querySelectorAll('.form-check-input[id^=\"namingRule\"]');\r\n        // 設定を読み込む\r\n        chrome.storage.local.get(['namingRules'], (result) => {\r\n            const namingRules = result.namingRules || [];\r\n            // if (namingRules.length === 0) {\r\n            //     namingRules = ['ファイル名']; // デフォルトで「ファイル名」を設定\r\n            //     chrome.storage.local.set({ namingRules });// このデフォルト値をストレージにも保存する（任意だが、次回読み込み時の一貫性のため推奨）\r\n            // }\r\n            // UIに反映\r\n            document.getElementById('namingRuleShopProduct').checked = namingRules.includes('ショップ名');\r\n            document.getElementById('namingRuleProductName').checked = namingRules.includes('商品名');\r\n            document.getElementById('namingRuleFileName').checked = namingRules.includes('ファイル名');\r\n        });\r\n\r\n        // ファイル命名規則の変更イベントで保存\r\n        // document.querySelectorAll('input[type=\"checkbox\"]').forEach(checkbox => {\r\n        namingRuleCheckboxes.forEach(checkbox => {\r\n            checkbox.addEventListener('change', () => {\r\n                let namingRules = [];\r\n                if (document.getElementById('namingRuleShopProduct').checked) namingRules.push('ショップ名');\r\n                if (document.getElementById('namingRuleProductName').checked) namingRules.push('商品名');\r\n                if (document.getElementById('namingRuleFileName').checked) namingRules.push('ファイル名');\r\n                if (namingRules.length === 0) {\r\n                    namingRules.push('ファイル名');\r\n                    document.getElementById('namingRuleFileName').checked = true; // UIにも反映\r\n                }\r\n                chrome.storage.local.set({ namingRules });\r\n            });\r\n        });\r\n    }\r\n    // --- options.htmlでのみ実行される処理 ---\r\n    if (document.body.id === 'options-page') {\r\n        const includeItemPageLinkCheckbox = document.getElementById('includeItemPageLink');\r\n\r\n        // 設定を読み込む\r\n        chrome.storage.local.get(['includeItemPageLink'], (result) => {\r\n            // 未設定(undefined)の場合はtrue（チェックを入れる）として扱う\r\n            includeItemPageLinkCheckbox.checked = result.includeItemPageLink !== false;\r\n        });\r\n\r\n        // 変更イベントで保存\r\n        includeItemPageLinkCheckbox.addEventListener('change', () => {\r\n            chrome.storage.local.set({ includeItemPageLink: includeItemPageLinkCheckbox.checked });\r\n        });\r\n    }\r\n    // --- 共通の処理 ---\r\n    const applyBtn = document.getElementById('applySettingsBtn');\r\n    if (applyBtn) {\r\n        applyBtn.addEventListener('click', () => {\r\n            chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\r\n                if (tabs[0]?.id) {\r\n                    chrome.tabs.reload(tabs[0].id); // アクティブなタブをリロード\r\n                }\r\n            });\r\n        });\r\n    }\r\n});\r\n// document.getElementById('applySettingsBtn').addEventListener('click', () => {\r\n//     chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\r\n//         if (tabs[0]?.id) {\r\n//             chrome.tabs.reload(tabs[0].id); // アクティブなタブをリロード\r\n//         }\r\n//     });\r\n// });"],"names":["document","addEventListener","async","body","id","namingRuleCheckboxes","querySelectorAll","chrome","storage","local","get","result","namingRules","getElementById","checked","includes","forEach","checkbox","push","length","set","includeItemPageLinkCheckbox","includeItemPageLink","applyBtn","tabs","query","active","currentWindow","_a","reload"],"mappings":"AAAAA,SAASC,iBAAiB,oBAAoBC,UAEtC,GAAqB,eAArBF,SAASG,KAAKC,GAAqB,CAC7B,MAAAC,EAAuBL,SAASM,iBAAiB,uCAEvDC,OAAOC,QAAQC,MAAMC,IAAI,CAAC,gBAAiBC,IACjC,MAAAC,EAAcD,EAAOC,aAAe,GAM1CZ,SAASa,eAAe,yBAAyBC,QAAUF,EAAYG,SAAS,SAChFf,SAASa,eAAe,yBAAyBC,QAAUF,EAAYG,SAAS,OAChFf,SAASa,eAAe,sBAAsBC,QAAUF,EAAYG,SAAS,YAKjFV,EAAqBW,SAAoBC,IAC5BA,EAAAhB,iBAAiB,UAAU,KAChC,IAAIW,EAAc,GACdZ,SAASa,eAAe,yBAAyBC,SAASF,EAAYM,KAAK,SAC3ElB,SAASa,eAAe,yBAAyBC,SAASF,EAAYM,KAAK,OAC3ElB,SAASa,eAAe,sBAAsBC,SAASF,EAAYM,KAAK,SACjD,IAAvBN,EAAYO,SACZP,EAAYM,KAAK,SACRlB,SAAAa,eAAe,sBAAsBC,SAAU,GAE5DP,OAAOC,QAAQC,MAAMW,IAAI,CAAER,qBAGtC,CAEG,GAAqB,iBAArBZ,SAASG,KAAKC,GAAuB,CAC/B,MAAAiB,EAA8BrB,SAASa,eAAe,uBAG5DN,OAAOC,QAAQC,MAAMC,IAAI,CAAC,wBAAyBC,IAEnBU,EAAAP,SAAyC,IAA/BH,EAAOW,uBAIrBD,EAAApB,iBAAiB,UAAU,KACnDM,OAAOC,QAAQC,MAAMW,IAAI,CAAEE,oBAAqBD,EAA4BP,YAEnF,CAEK,MAAAS,EAAWvB,SAASa,eAAe,oBACrCU,GACSA,EAAAtB,iBAAiB,SAAS,KACxBM,OAAAiB,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,IAASH,IApDtE,IAAAI,GAqDoB,OAAAA,EAAKJ,EAAA,SAAL,EAAAI,EAASxB,KACTG,OAAOiB,KAAKK,OAAOL,EAAK,GAAGpB"}