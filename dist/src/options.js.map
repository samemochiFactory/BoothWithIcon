{"version":3,"file":"options.js","sources":["../../src/options.js"],"sourcesContent":["// document.getElementById('selectFolderBtn').addEventListener('click', async () => {\r\n//     try {\r\n//         const folderHandle = await window.showDirectoryPicker();\r\n\r\n//         // Ê∞∏Á∂öÂåñ„Éà„Éº„ÇØ„É≥„Çí‰øùÂ≠òÔºàserialize ‰∏çÂèØ„Å™„ÅÆ„Åß IDB API„Åß„É©„ÉÉ„ÉóÂøÖË¶ÅÔºâ\r\n//         const granted = await verifyPermission(folderHandle);\r\n//         if (!granted) {\r\n//             alert(\"„Éï„Ç©„É´„ÉÄ„Å∏„ÅÆ„Ç¢„ÇØ„Çª„ÇπÊ®©Èôê„ÅåË®±ÂèØ„Åï„Çå„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ\");\r\n//             return;\r\n//         }\r\n\r\n//         // ‰øùÂ≠ò\r\n//         await chrome.storage.local.set({ folderHandle });\r\n//         document.getElementById('folderResult').textContent = `‚úÖ ÈÅ∏ÊäûÊ∏à„Åø: ${folderHandle.name}`;\r\n//     } catch (err) {\r\n//         console.error(\"„Éï„Ç©„É´„ÉÄÈÅ∏Êäû„Å´Â§±Êïó:\", err);\r\n//         document.getElementById('folderResult').textContent = '‚ùå ÈÅ∏ÊäûÂ§±Êïó';\r\n//     }\r\n// });\r\n\r\n// async function verifyPermission(handle) {\r\n//     const options = { mode: 'readwrite' };\r\n//     if ((await handle.queryPermission(options)) === 'granted') return true;\r\n//     if ((await handle.requestPermission(options)) === 'granted') return true;\r\n//     return false;\r\n// }\r\ndocument.getElementById('selectFolderBtn').addEventListener('click', async () => {\r\n    try {\r\n        const folderHandle = await window.showDirectoryPicker();\r\n\r\n        // Ê∞∏Á∂öÂåñ„Éà„Éº„ÇØ„É≥„Çí‰øùÂ≠òÔºàserialize ‰∏çÂèØ„Å™„ÅÆ„Åß IDB API„Åß„É©„ÉÉ„ÉóÂøÖË¶ÅÔºâ\r\n        const granted = await verifyPermission(folderHandle);\r\n        if (!granted) {\r\n            alert(\"„Éï„Ç©„É´„ÉÄ„Å∏„ÅÆ„Ç¢„ÇØ„Çª„ÇπÊ®©Èôê„ÅåË®±ÂèØ„Åï„Çå„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ\");\r\n            return;\r\n        }\r\n\r\n        // „Éï„Ç©„É´„ÉÄÂêç„ÅÆ„Åø„Çí‰øùÂ≠òÔºà„Éè„É≥„Éâ„É´„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Åß„ÅØ„Å™„ÅèÔºâ\r\n        const folderInfo = {\r\n            name: folderHandle.name,\r\n            timestamp: Date.now()\r\n        };\r\n\r\n        await chrome.storage.local.set({ folderInfo });\r\n\r\n        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„Å®„Åó„Å¶„Éè„É≥„Éâ„É´„Çí‰øùÊåÅ\r\n        window.currentFolderHandle = folderHandle;\r\n\r\n        document.getElementById('folderResult').textContent = `‚úÖ ÈÅ∏ÊäûÊ∏à„Åø: ${folderHandle.name}`;\r\n\r\n        // ÂÆüË°å„Éú„Çø„É≥„ÇíÊúâÂäπÂåñ\r\n        document.getElementById('executeBtn').disabled = false;\r\n\r\n    } catch (err) {\r\n        if (err.name === 'AbortError') {\r\n            // „É¶„Éº„Ç∂„Éº„Åå„Ç≠„É£„É≥„Çª„É´„Åó„ÅüÂ†¥Âêà\r\n            console.log(\"„Éï„Ç©„É´„ÉÄÈÅ∏Êäû„Åå„Ç≠„É£„É≥„Çª„É´„Åï„Çå„Åæ„Åó„Åü\");\r\n            document.getElementById('folderResult').textContent = 'üìÅ Êú™ÈÅ∏ÊäûÔºà„Ç≠„É£„É≥„Çª„É´„Åï„Çå„Åæ„Åó„ÅüÔºâ';\r\n        } else {\r\n            // „Åù„ÅÆ‰ªñ„ÅÆ„Ç®„É©„Éº\r\n            console.error(\"„Éï„Ç©„É´„ÉÄÈÅ∏Êäû„Å´Â§±Êïó:\", err);\r\n            document.getElementById('folderResult').textContent = '‚ùå ÈÅ∏ÊäûÂ§±Êïó: ' + err.message;\r\n        }\r\n    }\r\n});\r\n\r\n// „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´‰øùÂ≠ò„Åï„Çå„ÅüÊÉÖÂ†±„ÇíÂæ©ÂÖÉ\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n    try {\r\n        const result = await chrome.storage.local.get(['folderInfo']);\r\n        if (result.folderInfo) {\r\n            document.getElementById('folderResult').textContent =\r\n                `üìÅ ÂâçÂõûÈÅ∏Êäû: ${result.folderInfo.name} (‚ÄªÂÜçÈÅ∏Êäû„ÅåÂøÖË¶Å)`;\r\n        }\r\n    } catch (err) {\r\n        console.error(\"‰øùÂ≠ò„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó:\", err);\r\n    }\r\n});\r\n\r\nasync function verifyPermission(handle) {\r\n    const options = { mode: 'readwrite' };\r\n    if ((await handle.queryPermission(options)) === 'granted') return true;\r\n    if ((await handle.requestPermission(options)) === 'granted') return true;\r\n    return false;\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,SAAS,eAAe,iBAAiB,EAAE,iBAAiB,SAAS,YAAY;AAC7E,MAAI;AACA,UAAM,eAAe,MAAM,OAAO;AAGlC,UAAM,UAAU,MAAM,iBAAiB,YAAY;AACnD,QAAI,CAAC,SAAS;AACV,YAAM,0BAA0B;AAChC;AAAA,IACH;AAGD,UAAM,aAAa;AAAA,MACf,MAAM,aAAa;AAAA,MACnB,WAAW,KAAK,IAAK;AAAA,IACjC;AAEQ,UAAM,OAAO,QAAQ,MAAM,IAAI,EAAE,WAAU,CAAE;AAG7C,WAAO,sBAAsB;AAE7B,aAAS,eAAe,cAAc,EAAE,cAAc,WAAW,aAAa,IAAI;AAGlF,aAAS,eAAe,YAAY,EAAE,WAAW;AAAA,EAEpD,SAAQ,KAAK;AACV,QAAI,IAAI,SAAS,cAAc;AAE3B,cAAQ,IAAI,mBAAmB;AAC/B,eAAS,eAAe,cAAc,EAAE,cAAc;AAAA,IAClE,OAAe;AAEH,cAAQ,MAAM,cAAc,GAAG;AAC/B,eAAS,eAAe,cAAc,EAAE,cAAc,aAAa,IAAI;AAAA,IAC1E;AAAA,EACJ;AACL,CAAC;AAGD,SAAS,iBAAiB,oBAAoB,YAAY;AACtD,MAAI;AACA,UAAM,SAAS,MAAM,OAAO,QAAQ,MAAM,IAAI,CAAC,YAAY,CAAC;AAC5D,QAAI,OAAO,YAAY;AACnB,eAAS,eAAe,cAAc,EAAE,cACpC,YAAY,OAAO,WAAW,IAAI;AAAA,IACzC;AAAA,EACJ,SAAQ,KAAK;AACV,YAAQ,MAAM,kBAAkB,GAAG;AAAA,EACtC;AACL,CAAC;AAED,eAAe,iBAAiB,QAAQ;AACpC,QAAM,UAAU,EAAE,MAAM;AACxB,MAAK,MAAM,OAAO,gBAAgB,OAAO,MAAO,UAAW,QAAO;AAClE,MAAK,MAAM,OAAO,kBAAkB,OAAO,MAAO,UAAW,QAAO;AACpE,SAAO;AACX;"}