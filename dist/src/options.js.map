{"version":3,"file":"options.js","sources":["../../src/options.js"],"sourcesContent":["// document.getElementById('selectFolderBtn').addEventListener('click', async () => {\r\n//     try {\r\n//         const folderHandle = await window.showDirectoryPicker();\r\n\r\n//         // Ê∞∏Á∂öÂåñ„Éà„Éº„ÇØ„É≥„Çí‰øùÂ≠òÔºàserialize ‰∏çÂèØ„Å™„ÅÆ„Åß IDB API„Åß„É©„ÉÉ„ÉóÂøÖË¶ÅÔºâ\r\n//         const granted = await verifyPermission(folderHandle);\r\n//         if (!granted) {\r\n//             alert(\"„Éï„Ç©„É´„ÉÄ„Å∏„ÅÆ„Ç¢„ÇØ„Çª„ÇπÊ®©Èôê„ÅåË®±ÂèØ„Åï„Çå„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ\");\r\n//             return;\r\n//         }\r\n\r\n//         // ‰øùÂ≠ò\r\n//         await chrome.storage.local.set({ folderHandle });\r\n//         document.getElementById('folderResult').textContent = `‚úÖ ÈÅ∏ÊäûÊ∏à„Åø: ${folderHandle.name}`;\r\n//     } catch (err) {\r\n//         console.error(\"„Éï„Ç©„É´„ÉÄÈÅ∏Êäû„Å´Â§±Êïó:\", err);\r\n//         document.getElementById('folderResult').textContent = '‚ùå ÈÅ∏ÊäûÂ§±Êïó';\r\n//     }\r\n// });\r\n\r\n// async function verifyPermission(handle) {\r\n//     const options = { mode: 'readwrite' };\r\n//     if ((await handle.queryPermission(options)) === 'granted') return true;\r\n//     if ((await handle.requestPermission(options)) === 'granted') return true;\r\n//     return false;\r\n// }\r\ndocument.getElementById('selectFolderBtn').addEventListener('click', async () => {\r\n    try {\r\n        const folderHandle = await window.showDirectoryPicker();\r\n\r\n        // Ê∞∏Á∂öÂåñ„Éà„Éº„ÇØ„É≥„Çí‰øùÂ≠òÔºàserialize ‰∏çÂèØ„Å™„ÅÆ„Åß IDB API„Åß„É©„ÉÉ„ÉóÂøÖË¶ÅÔºâ\r\n        const granted = await verifyPermission(folderHandle);\r\n        if (!granted) {\r\n            alert(\"„Éï„Ç©„É´„ÉÄ„Å∏„ÅÆ„Ç¢„ÇØ„Çª„ÇπÊ®©Èôê„ÅåË®±ÂèØ„Åï„Çå„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ\");\r\n            return;\r\n        }\r\n\r\n        // „Éï„Ç©„É´„ÉÄÂêç„ÅÆ„Åø„Çí‰øùÂ≠òÔºà„Éè„É≥„Éâ„É´„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Åß„ÅØ„Å™„ÅèÔºâ\r\n        const folderInfo = {\r\n            name: folderHandle.name,\r\n            timestamp: Date.now()\r\n        };\r\n\r\n        await chrome.storage.local.set({ folderInfo });\r\n\r\n        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„Å®„Åó„Å¶„Éè„É≥„Éâ„É´„Çí‰øùÊåÅ\r\n        window.currentFolderHandle = folderHandle;\r\n\r\n        document.getElementById('folderResult').textContent = `‚úÖ ÈÅ∏ÊäûÊ∏à„Åø: ${folderHandle.name}`;\r\n\r\n        // ÂÆüË°å„Éú„Çø„É≥„ÇíÊúâÂäπÂåñ\r\n        document.getElementById('executeBtn').disabled = false;\r\n\r\n    } catch (err) {\r\n        if (err.name === 'AbortError') {\r\n            // „É¶„Éº„Ç∂„Éº„Åå„Ç≠„É£„É≥„Çª„É´„Åó„ÅüÂ†¥Âêà\r\n            console.log(\"„Éï„Ç©„É´„ÉÄÈÅ∏Êäû„Åå„Ç≠„É£„É≥„Çª„É´„Åï„Çå„Åæ„Åó„Åü\");\r\n            document.getElementById('folderResult').textContent = 'üìÅ Êú™ÈÅ∏ÊäûÔºà„Ç≠„É£„É≥„Çª„É´„Åï„Çå„Åæ„Åó„ÅüÔºâ';\r\n        } else {\r\n            // „Åù„ÅÆ‰ªñ„ÅÆ„Ç®„É©„Éº\r\n            console.error(\"„Éï„Ç©„É´„ÉÄÈÅ∏Êäû„Å´Â§±Êïó:\", err);\r\n            document.getElementById('folderResult').textContent = '‚ùå ÈÅ∏ÊäûÂ§±Êïó: ' + err.message;\r\n        }\r\n    }\r\n});\r\n\r\n// „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´‰øùÂ≠ò„Åï„Çå„ÅüÊÉÖÂ†±„ÇíÂæ©ÂÖÉ\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n    try {\r\n        const result = await chrome.storage.local.get(['folderInfo']);\r\n        if (result.folderInfo) {\r\n            document.getElementById('folderResult').textContent =\r\n                `üìÅ ÂâçÂõûÈÅ∏Êäû: ${result.folderInfo.name} (‚ÄªÂÜçÈÅ∏Êäû„ÅåÂøÖË¶Å)`;\r\n        }\r\n    } catch (err) {\r\n        console.error(\"‰øùÂ≠ò„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó:\", err);\r\n    }\r\n});\r\n\r\nasync function verifyPermission(handle) {\r\n    const options = { mode: 'readwrite' };\r\n    if ((await handle.queryPermission(options)) === 'granted') return true;\r\n    if ((await handle.requestPermission(options)) === 'granted') return true;\r\n    return false;\r\n}"],"names":["folderHandle","verifyPermission","folderInfo","err","result","handle","options"],"mappings":"ssBA0BA,SAAS,eAAe,iBAAiB,EAAE,iBAAiB,QAAS,SAAY,CAC7E,GAAI,CACA,MAAMA,EAAe,MAAM,OAAO,sBAIlC,GAAI,CADY,MAAMC,EAAiBD,CAAY,EACrC,CACV,MAAM,0BAA0B,EAChC,MACH,CAGD,MAAME,EAAa,CACf,KAAMF,EAAa,KACnB,UAAW,KAAK,IAAK,CACjC,EAEQ,MAAM,OAAO,QAAQ,MAAM,IAAI,CAAE,WAAAE,CAAU,CAAE,EAG7C,OAAO,oBAAsBF,EAE7B,SAAS,eAAe,cAAc,EAAE,YAAc,WAAWA,EAAa,IAAI,GAGlF,SAAS,eAAe,YAAY,EAAE,SAAW,EAEpD,OAAQG,EAAK,CACNA,EAAI,OAAS,cAEb,QAAQ,IAAI,mBAAmB,EAC/B,SAAS,eAAe,cAAc,EAAE,YAAc,uBAGtD,QAAQ,MAAM,aAAcA,CAAG,EAC/B,SAAS,eAAe,cAAc,EAAE,YAAc,WAAaA,EAAI,QAE9E,CACL,CAAC,EAGD,SAAS,iBAAiB,mBAAoB,SAAY,CACtD,GAAI,CACA,MAAMC,EAAS,MAAM,OAAO,QAAQ,MAAM,IAAI,CAAC,YAAY,CAAC,EACxDA,EAAO,aACP,SAAS,eAAe,cAAc,EAAE,YACpC,YAAYA,EAAO,WAAW,IAAI,aAE7C,OAAQD,EAAK,CACV,QAAQ,MAAM,iBAAkBA,CAAG,CACtC,CACL,CAAC,EAED,eAAeF,EAAiBI,EAAQ,CACpC,MAAMC,EAAU,CAAE,KAAM,aAExB,OADK,MAAMD,EAAO,gBAAgBC,CAAO,IAAO,WAC3C,MAAMD,EAAO,kBAAkBC,CAAO,IAAO,SAEtD"}